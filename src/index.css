@tailwind base;
@tailwind components;
@tailwind utilities;

/* Подключаем стили React Flow */
@import 'reactflow/dist/style.css';

/* React Flow — гарантируем обработку событий */
.react-flow,
.react-flow__renderer,
.react-flow__pane,
.react-flow__panel,
.react-flow__minimap {
  pointer-events: all !important;
  z-index: 1 !important;
}

/* Спрятать точки-коннекторы у нод, но оставить drag-to-connect */
.react-flow__handle {
  display: none !important;
}

/* Скрыть подпись React Flow (watermark в углу) */
.react-flow__attribution {
  display: none !important;
}

/* ===== Тема через CSS-переменные ===== */
:root {
  /* карточки нод */
  --rf-node-bg: rgba(255, 255, 255, 0.85);
  --rf-node-fg: #0b0e14;

  /* рёбра и стрелки (для light) */
  --rf-edge-stroke: #475569; /* slate-600 */
  --rf-marker:      #475569;

  /* фоновые точки (light) */
  --rf-bg-dot: rgba(0, 0, 0, 0.08);
}

html.dark {
  /* карточки нод */
  --rf-node-bg: rgba(24, 24, 27, 0.70);
  --rf-node-fg: #e5e7eb;

  /* рёбра и стрелки (для dark) */
  --rf-edge-stroke: #8AB4F8;
  --rf-marker:      #8AB4F8;

  /* фоновые точки (dark) */
  --rf-bg-dot: rgba(255, 255, 255, 0.12);
}

/* ===== Рёбра ===== */
.react-flow__edges {
  opacity: 1 !important;
  z-index: 2 !important;
}

.react-flow__edge-path {
  stroke: var(--rf-edge-stroke) !important;
  stroke-width: 3 !important;
  fill: none !important;
  opacity: 1 !important;
}

.react-flow__arrowhead path {
  fill: var(--rf-marker) !important;
  stroke: var(--rf-marker) !important;
  opacity: 1 !important;
}

/* Подписи рёбер не мешают drag/zoom */
.react-flow__edge-text,
.react-flow__edge-textbg,
.react-flow__edge-textwrapper {
  pointer-events: none !important;
}

/* ===== Стилизация скроллбаров (как в App.tsx) ===== */
.custom-scroll::-webkit-scrollbar {
  width: 10px;
}
.custom-scroll::-webkit-scrollbar-thumb {
  background: rgba(148,163,184,0.25);
  border-radius: 9999px;
  border: 2px solid transparent;
  background-clip: padding-box;
}
.custom-scroll::-webkit-scrollbar-track {
  background: transparent;
}
